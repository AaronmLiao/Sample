jQuery(document).ready(function(){function e(i){i.length>0&&setTimeout(function(){i.addClass("slides-in"),e(i.next())},50)}function i(){return window.getComputedStyle(document.querySelector(".cd-projects-wrapper"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function n(){var e=i();if("desktop"==e){var n=p.children("li"),t=n.eq(0).width(),s=Number(p.children("li").eq(1).css("margin-left").replace("px","")),r=(t+s)*(n.length+1)+"px",a=p.children("li.current").index();p.css("width",r),0!=a&&o(p,a*(t+s)+"px")}else p.css("width",""),o(p,0);m=!1}function t(e){var i=e.children(".current"),n=i.index(),t=i.nextAll("li").length,s=i.width(),a=Number(e.children("li").eq(1).css("margin-left").replace("px",""));n=t>4?n+3:n+t-2,translate=n*(s+a)+"px",e.addClass("next"),o(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r("next",i,e,t)}),$(".no-csstransitions").length>0&&r("next",i,e,t)}function s(e){var i=e.children(".previous"),n=i.index(),t=i.width(),s=Number(e.children("li").eq(1).css("margin-left").replace("px",""));console.log(s),translate=n*(t+s)+"px",e.addClass("prev"),o(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r("prev",i,e)}),$(".no-csstransitions").length>0&&r("prev",i,e)}function r(e,i,n,t){"next"==e?(n.removeClass("next").find(".previous").removeClass("previous"),i.removeClass("current"),t>4?i.addClass("previous").next("li").next("li").next("li").addClass("current"):4==t?(i.next("li").next("li").addClass("current"),i.prev("li").addClass("previous")):3==t&&(i.next("li").addClass("current"),i.prev("li").prev("li").addClass("previous"))):(n.removeClass("prev").find(".current").removeClass("current"),i.removeClass("previous").addClass("current"),i.prevAll("li").length>2?i.prev("li").prev("li").prev("li").addClass("previous"):!n.children("li").eq(0).hasClass("current")&&n.children("li").eq(0).addClass("previous")),a()}function a(){var e=h.find("li.current");e.is(":first-child")?f.find(".prev").addClass("inactive"):f.find(".prev").removeClass("inactive"),e.nextAll("li").length<3?f.find(".next").addClass("inactive"):f.find(".next").removeClass("inactive")}function o(e,i){e.css({"-moz-transform":"translateX(-"+i+")","-webkit-transform":"translateX(-"+i+")","-ms-transform":"translateX(-"+i+")","-o-transform":"translateX(-"+i+")",transform:"translateX(-"+i+")"})}function l(){var e=$(window).height()+5,i=parseInt(e)+"px";$(".homepage-hero-module").css("height",i)}function c(e){$(e).each(function(){$(this).data("height",$(this).height()),$(this).data("width",$(this).width())}),d(e)}function d(e){var i,n,t=$(window).width(),s=$(window).height()+5;console.log(s),$(e).each(function(){var e=$(this).data("height")/$(this).data("width");$(this).width(t),1e3>t&&(n=s,i=n/e,$(this).css({"margin-top":0,"margin-left":-(i-t)/2+"px"}),$(this).width(i).height(n)),$(".homepage-hero-module .video-container video").addClass("fadeIn animated")})}var v=$(".cd-intro-block"),h=$(".cd-projects-wrapper"),p=h.children(".cd-slider"),u=$(".cd-project-content"),f=$(".cd-slider-navigation"),m=!1;l(),c(".video-container .poster img"),c(".video-container .filter"),c(".video-container video"),$(window).on("resize",function(){l(),d(".video-container .poster img"),d(".video-container .filter"),d(".video-container video")}),n(),$(window).on("resize",function(){m||(window.requestAnimationFrame?window.requestAnimationFrame(n):n(),m=!0)}),v.on("click",'a[data-action="show-projects"]',function(i){i.preventDefault(),v.addClass("projects-visible"),h.addClass("projects-visible"),setTimeout(function(){e(p.children("li").eq(0))},200)}),v.on("click",function(e){v.hasClass("projects-visible")&&!$(e.target).is('a[data-action="show-projects"]')&&(v.removeClass("projects-visible"),h.removeClass("projects-visible"))}),h.on("click",".cd-slider a",function(e){e.preventDefault(),$(this).parent("li").next("li").is(".current")?s(p):$(this).parent("li").prev("li").prev("li").prev("li").is(".current")?t(p):u.addClass("is-visible")}),u.on("click",".close",function(e){e.preventDefault(),u.removeClass("is-visible")}),f.on("click",".next",function(){t(p)}),f.on("click",".prev",function(){s(p)}),$(document).keyup(function(e){"37"==e.which&&v.hasClass("projects-visible")&&!f.find(".prev").hasClass("inactive")?s(p):"39"==e.which&&v.hasClass("projects-visible")&&!f.find(".next").hasClass("inactive")?t(p):"27"==e.which&&u.hasClass("is-visible")&&u.removeClass("is-visible")}),p.on("swipeleft",function(){!f.find(".next").hasClass("inactive")&&t(p)}),p.on("swiperight",function(){!f.find(".prev").hasClass("inactive")&&s(p)})});